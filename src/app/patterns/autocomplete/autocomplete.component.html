<div class="pattern-header">
  <h1 class="pattern-title">
    <span class="pattern-icon">üîç</span>
    Autocomplete Pattern
  </h1>
  <p class="pattern-description">
    Smart search and selection components with type-ahead functionality, filtering, and keyboard navigation.
  </p>
</div>

<div class="pattern-demo">
  <div class="autocomplete-demo">
    <!-- Basic Autocomplete -->
    <div class="demo-section">
      <h3 class="demo-title">Basic Autocomplete</h3>
      <div class="autocomplete-container">
        <label class="autocomplete-label">Search Countries</label>
        <input type="text"
               class="autocomplete-input"
               placeholder="Type to search countries..."
               [(ngModel)]="basicQuery"
               (input)="onBasicInput()"
               (keydown)="onBasicKeydown($event)">
        
        <div class="autocomplete-dropdown" [class.open]="basicIsOpen">
          <div *ngFor="let option of getFilteredCountries(); let i = index"
               class="autocomplete-option"
               [class.highlighted]="i === basicSelectedIndex"
               (click)="selectBasicOption(option)">
            <span class="option-icon" *ngIf="option.icon">{{ option.icon }}</span>
            <span class="option-label" [innerHTML]="highlightMatch(option.label, basicQuery)"></span>
          </div>
          
          <div *ngIf="getFilteredCountries().length === 0 && basicQuery.trim()" 
               class="no-results">
            No countries found
          </div>
        </div>
      </div>
    </div>

    <!-- Multi-select Autocomplete -->
    <div class="demo-section">
      <h3 class="demo-title">Multi-select Autocomplete</h3>
      <div class="autocomplete-container multi-select">
        <label class="autocomplete-label">Programming Languages</label>
        <div class="autocomplete-multi-input">
          <div class="selected-items">
            <span *ngFor="let item of multiSelectedItems" 
                  class="selected-tag">
              <span class="tag-icon" *ngIf="item.icon">{{ item.icon }}</span>
              {{ item.label }}
              <button class="remove-btn" (click)="removeMultiItem(item)">√ó</button>
            </span>
          </div>
          <input type="text"
                 class="autocomplete-input"
                 placeholder="Add programming languages..."
                 [(ngModel)]="multiQuery"
                 (input)="onMultiInput()"
                 (keydown)="onMultiKeydown($event)">
        </div>
        
        <div class="autocomplete-dropdown" [class.open]="multiIsOpen">
          <div *ngFor="let option of getFilteredLanguages(); let i = index"
               class="autocomplete-option with-category"
               [class.highlighted]="i === multiSelectedIndex"
               (click)="selectMultiOption(option)">
            <span class="option-icon" *ngIf="option.icon">{{ option.icon }}</span>
            <div class="option-content">
              <span class="option-label" [innerHTML]="highlightMatch(option.label, multiQuery)"></span>
              <span class="option-category" *ngIf="option.category">{{ option.category }}</span>
            </div>
          </div>
          
          <div *ngIf="getFilteredLanguages().length === 0 && multiQuery.trim()" 
               class="no-results">
            No languages found
          </div>
        </div>
      </div>
    </div>

    <!-- User Search Autocomplete -->
    <div class="demo-section">
      <h3 class="demo-title">User Search with Avatars</h3>
      <div class="autocomplete-container">
        <label class="autocomplete-label">Search Team Members</label>
        <input type="text"
               class="autocomplete-input"
               placeholder="Search by name or role..."
               [(ngModel)]="userQuery"
               (input)="onUserInput()"
               (keydown)="onUserKeydown($event)">
        
        <div class="autocomplete-dropdown" [class.open]="userIsOpen">
          <div *ngFor="let option of getFilteredUsers(); let i = index"
               class="autocomplete-option user-option"
               [class.highlighted]="i === userSelectedIndex"
               (click)="selectUserOption(option)">
            <div class="user-avatar" *ngIf="option.avatar">{{ option.avatar }}</div>
            <div class="user-content">
              <div class="user-name" [innerHTML]="highlightMatch(option.label, userQuery)"></div>
              <div class="user-description" *ngIf="option.description">{{ option.description }}</div>
              <div class="user-category" *ngIf="option.category">{{ option.category }}</div>
            </div>
          </div>
          
          <div *ngIf="getFilteredUsers().length === 0 && userQuery.trim()" 
               class="no-results">
            No team members found
          </div>
        </div>
      </div>
    </div>

    <!-- Demo Info -->
    <div class="demo-info">
      <h4 class="info-title">Interactive Features</h4>
      <div class="info-grid">
        <div class="info-item">
          <span class="info-icon">‚å®Ô∏è</span>
          <span>Use arrow keys to navigate options</span>
        </div>
        <div class="info-item">
          <span class="info-icon">‚èé</span>
          <span>Press Enter to select highlighted option</span>
        </div>
        <div class="info-item">
          <span class="info-icon">üè∑Ô∏è</span>
          <span>Multi-select supports multiple values</span>
        </div>
        <div class="info-item">
          <span class="info-icon">üîç</span>
          <span>Search highlights matching text</span>
        </div>
      </div>
    </div>
  </div>
</div>

<app-code-tabs 
  [htmlCode]="htmlCode" 
  [scssCode]="scssCode" 
  [typescriptCode]="typescriptCode">
</app-code-tabs>