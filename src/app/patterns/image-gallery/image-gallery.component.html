<div class="pattern-header">
  <h1 class="pattern-title">
    <span class="pattern-icon">🖼️</span>
    Image Gallery Pattern
  </h1>
  <p class="pattern-description">
    Responsive image gallery with lightbox, filtering, search, and multiple view modes for showcasing image collections.
  </p>
</div>

<div class="pattern-demo">
  <div class="gallery-container">
    <!-- Gallery Controls -->
    <div class="gallery-controls">
      <div class="search-container">
        <input type="text" 
               class="search-input"
               placeholder="Search images..."
               [(ngModel)]="searchQuery">
      </div>
      
      <div class="filter-buttons">
        <button *ngFor="let filter of filters"
                class="filter-btn"
                [class.active]="currentFilter === filter.category"
                (click)="setFilter(filter.category)">
          {{ filter.label }}
        </button>
      </div>
      
      <div class="view-controls">
        <button class="view-btn"
                [class.active]="viewMode === 'grid'"
                (click)="setViewMode('grid')"
                title="Grid View">📱</button>
        <button class="view-btn"
                [class.active]="viewMode === 'masonry'"
                (click)="setViewMode('masonry')"
                title="Masonry View">🧱</button>
        <button class="view-btn"
                [class.active]="viewMode === 'list'"
                (click)="setViewMode('list')"
                title="List View">📋</button>
      </div>
    </div>

    <!-- Results Info -->
    <div class="results-info" *ngIf="searchQuery || currentFilter !== 'all'">
      <span>{{ filteredImages.length }} images found</span>
      <button *ngIf="searchQuery" 
              class="clear-search"
              (click)="searchQuery = ''">Clear search</button>
    </div>

    <!-- Image Grid -->
    <div class="image-grid" [ngClass]="'view-' + viewMode">
      <div *ngFor="let image of filteredImages; let i = index"
           class="image-item"
           (click)="openLightbox(i)">
        <img [src]="image.src"
             [alt]="image.alt"
             (load)="onImageLoad($event)"
             (error)="onImageError($event)"
             loading="lazy">
        <div class="image-overlay">
          <h3 class="image-title">{{ image.title }}</h3>
          <p class="image-description">{{ image.description }}</p>
          <div class="image-tags" *ngIf="image.tags && image.tags.length > 0">
            <span *ngFor="let tag of image.tags" class="tag">{{ tag }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredImages.length === 0" class="empty-state">
      <div class="empty-icon">🔍</div>
      <h3>No images found</h3>
      <p>Try adjusting your search or filter criteria</p>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" 
         [class.open]="isLightboxOpen" 
         (click)="closeLightbox()"
         *ngIf="isLightboxOpen">
      <div class="lightbox-content" (click)="$event.stopPropagation()">
        <button class="lightbox-close" 
                (click)="closeLightbox()"
                title="Close (Esc)">×</button>
        
        <button class="lightbox-nav prev" 
                (click)="previousImage()"
                title="Previous (←)"
                *ngIf="filteredImages.length > 1">‹</button>
        
        <button class="lightbox-nav next" 
                (click)="nextImage()"
                title="Next (→)"
                *ngIf="filteredImages.length > 1">›</button>
        
        <img *ngIf="currentImage" 
             [src]="currentImage.src"
             [alt]="currentImage.alt"
             class="lightbox-image">
        
        <div class="lightbox-info" *ngIf="currentImage">
          <h3>{{ currentImage.title }}</h3>
          <p>{{ currentImage.description }}</p>
          <div class="image-meta">
            <span class="image-count">{{ selectedImageIndex + 1 }} of {{ filteredImages.length }}</span>
            <span class="image-category" *ngIf="currentImage.category">{{ currentImage.category }}</span>
          </div>
          <div class="image-tags" *ngIf="currentImage.tags && currentImage.tags.length > 0">
            <span *ngFor="let tag of currentImage.tags" class="tag">{{ tag }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-code-tabs 
  [htmlCode]="htmlCode" 
  [scssCode]="scssCode" 
  [typescriptCode]="typescriptCode">
</app-code-tabs>